<template>

    <!-- POPUP -->
    <template if:true={showPopup}>
        <div class="popup-backdrop"></div>

        <div class="popup">
            <div class="popup-header">
                <h2>Select Field ({objectName})</h2>
                <lightning-button-icon icon-name="utility:close" onclick={closePopup}></lightning-button-icon>
            </div>

            <div class="field-list">
                <template for:each={fields} for:item="f">
                    <div class="fieldRow" key={f.apiName} data-field={f.apiName} onclick={selectField}>
                        <b>{f.label}</b> ({f.apiName})
                        <template if:true={f.isLookup}>
                            <span class="lookup">â†’ Lookup: {f.referenceTo}</span>
                        </template>
                    </div>
                </template>
            </div>
        </div>
    </template>

    <!-- Preview Table -->
    <template if:true={records.length}>
        <lightning-datatable
            key-field="Id"
            data={records}
            columns={columns}>
        </lightning-datatable>
    </template>

</template>
